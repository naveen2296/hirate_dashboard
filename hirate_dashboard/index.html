<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HiRATE Overall Summary | Central Monitoring System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script>
        if (sessionStorage.getItem('isLoggedIn') !== 'true') {
            window.location.href = 'login.html';
        }
    </script>
</head>

<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header glass-card">
            <div class="header-left">
                <div class="logo-container">
                    <div class="logo-star">
                        <svg viewBox="0 0 100 100" class="star-icon">
                            <polygon points="50,5 61,35 95,35 68,57 79,91 50,70 21,91 32,57 5,35 39,35"
                                fill="url(#starGrad)" />
                            <defs>
                                <linearGradient id="starGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4ade80" />
                                    <stop offset="100%" style="stop-color:#22c55e" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="title-container">
                        <h1 class="main-title">HiRATE Overall Summary</h1>
                        <span class="month-badge">NOVEMBER 2025</span>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="company-logos">
                    <img src="logo-star.png" alt="HiRATE" class="company-logo logo-star-img">
                    <img src="logo-highways.png" alt="Cube Highways" class="company-logo logo-highways">
                    <img src="logo-tech.png" alt="Cube Tech" class="company-logo logo-tech">
                </div>
                <div class="live-indicator">
                    <span class="pulse-dot"></span>
                    <span class="live-text">LIVE</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- TOP ROW: 4 small charts + TARM -->
            <div class="top-row">
                <div class="chart-card glass-card gauge-card">
                    <h3 class="card-title">Overall Project Rating</h3>
                    <div class="gauge-container">
                        <canvas id="gaugeChart"></canvas>
                        <div class="gauge-value"><span class="gauge-number">8.94</span></div>
                    </div>
                    <div class="gauge-labels"><span>0.00</span><span>10.00</span></div>
                </div>
                <div class="chart-card glass-card">
                    <h3 class="card-title">Project HO Rating by Month</h3>
                    <div class="chart-container"><canvas id="hoRatingChart"></canvas></div>
                </div>
                <div class="chart-card glass-card">
                    <h3 class="card-title">Condition Rating</h3>
                    <div class="condition-legend">
                        <span class="legend-tag cc">CC</span>
                        <span class="legend-tag fc">FC</span>
                        <span class="legend-tag pc">PC</span>
                    </div>
                    <div class="chart-container"><canvas id="conditionChart"></canvas></div>
                </div>
                <div class="chart-card glass-card">
                    <h3 class="card-title">TAR Count of Ratings</h3>
                    <div class="chart-container"><canvas id="tarChart"></canvas></div>
                </div>
                <div class="chart-card glass-card">
                    <h3 class="card-title">TARM Rating by Category</h3>
                    <div class="chart-container"><canvas id="tarmChart"></canvas></div>
                </div>
            </div>

            <!-- MIDDLE SECTION -->
            <div class="middle-section">
                <!-- LEFT: Heatmap + Issues -->
                <div class="left-column">
                    <div class="chart-card glass-card heatmap-card">
                        <h3 class="card-title">Parameter Ratings Heatmap</h3>
                        <div id="heatmapContainer"></div>
                    </div>
                    <div class="chart-card glass-card issues-card">
                        <h3 class="card-title">Sum of Issues</h3>
                        <div class="issues-legend">
                            <span class="legend-tag issues">● Sum of Issues</span>
                            <span class="legend-tag average">● Average Issues</span>
                        </div>
                        <div class="chart-container issues-chart"><canvas id="issuesChart"></canvas></div>
                    </div>
                </div>

                <!-- RIGHT: Map + Rankings -->
                <div class="right-column">
                    <div class="chart-card glass-card map-card">
                        <h3 class="card-title">Rise & fall map based on respective own benchmarks</h3>
                        <div class="map-container" id="indiaMap"></div>
                        <div class="map-legend">
                            <div class="map-legend-item"><span class="marker retained"></span><span>RETAINED</span>
                            </div>
                            <div class="map-legend-item"><span class="marker rise"></span><span>RISE</span></div>
                            <div class="map-legend-item"><span class="marker fall"></span><span>FALL</span></div>
                        </div>
                    </div>
                    <div class="chart-card glass-card ranking-card">
                        <h3 class="card-title">Project Rankings</h3>
                        <div class="ranking-header">
                            <span>A Grade</span><span>B Grade</span><span>C Grade</span>
                        </div>
                        <div class="ranking-subheader">
                            <span class="legend-black">*Monthly Rating</span>
                            <span class="legend-green">*Cumulative Rating</span>
                        </div>
                        <div id="pyramidContainer" class="pyramid-container"></div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer glass-card">
            <span>© 2025 Cube Highways Technologies. All rights reserved.</span>
            <span>Last Updated: <span id="lastUpdated"></span></span>
        </footer>
    </div>

    <script src="data.js"></script>
    <script src="charts.js"></script>
    <script src="map.js"></script>
    <script src="app.js"></script>
</body>

</html>